:root{
  --square-size: 56px; /* 原来 28px，改为两倍 */
  --grid-gap: 8px;     /* 稍增间隙 */
  --grid-columns: 5;
  --grid-rows-visible: 10;
  /* 星标预留宽度（含按钮和间隙），可调整 */
  --star-space: 56px;
}
body { font-family: "Helvetica Neue", Arial, sans-serif; }
#opts { display:flex; flex-direction:column; gap:8px; }
/* 选项按钮样式 */
.option-btn {
  text-align:left;
  padding:12px 14px; /* 由 8/10 增大到 12/14 */
  border-radius:8px;
  border:1px solid #e6e6e6;
  background:#fff;
  cursor:pointer;
  font-size:15px; /* 字体放大 */
  transition: background 120ms ease, border-color 120ms ease;
}
.option-btn.selected { background:#e9f3ff; border-color:#9ecbff; }
.option-btn.correct { background:#d4f7d6; border-color:#7bd07a; color:#034b11; }
.option-btn.wrong { background:#ffd6d6; border-color:#ff8b8b; color:#5b0000; }
/* 小方块网格：不再自己产生纵向滚动，滚动由外层 card-body 承担 */
.uid-grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-columns), 1fr); /* 五等分，占满卡片宽度 */
  grid-auto-rows: 1fr; /* JS 会设置为具体像素行高，保证正方形 */
  gap: var(--grid-gap);
  width: 100%; /* 自适应父容器宽度 */
  /* 不在这里滚动，防止滚动条覆盖方块 */
  overflow-y: visible;
  overflow-x: hidden;
  padding: 6px;
  box-sizing: border-box;
}

/* 外层 card-body 承担滚动条（移动到卡片边缘，避免遮挡网格） */
.card .card-body {
  padding: 14px;
  /* 允许纵向滚动并显示滚动条在卡片上 */
  overflow-y: auto;
}

/* 每个方块视觉为单元格填满，保持正方形 */
.uid-square {
  width: 100%;
  aspect-ratio: 1 / 1; /* 保证为正方形 */
  background:#fff;
  border:1px solid #e6e6e6;
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 1px 2px rgba(0,0,0,0.04);
  font-size:14px;     /* 字体增大，配合更大方块 */
  line-height:1;
  user-select:none;
  text-align:center;
  padding: 2px;
  color: #222;
}

/* 状态色与样式 */
.uid-square.active { outline:2px solid #0d6efd; }
.uid-square.green { background:#c8f7c5; border-color:#a6e9a0; }
.uid-square.red { background:#f7c5c5; border-color:#f0a0a0; }
/* 星标按钮黄色状态 */
#starBtn.starred { background: #ffec99; border-color: #ffd43b; color:#6a4d00; }
/* 让 card-body 内边距稍增，配合方块和视觉留白 */
.card .card-body {
  padding: 14px;
}

/* 减小行间 gutter，使两卡间距更小 */
.row.g-3 {
  --bs-gutter-x: 8px; /* 原来较大，缩小为 8px */
  --bs-gutter-y: 12px;
}

/* 在大屏时调整左右两列占比：左大约 70%，右约 30%（覆盖 bootstrap 默认） */
@media (min-width: 992px) {
  .col-lg-8 {
    flex: 0 0 70%;
    max-width: 70%;
  }
  .col-lg-4 {
    flex: 0 0 30%;
    max-width: 30%;
  }
  /* 让父容器内左右两卡间距更紧凑 */
  .container .row { align-items: start; }
}

/* 卡片居中并限制最大宽度，移动端自适应 */
.card {
  margin: 12px auto;
  max-width: calc(100% - 24px);
  transition: width 160ms ease;
}

/* 卡片内部按钮组可换行（保证移动端不溢出） */
.card .card-body .d-flex {
  flex-wrap: wrap;
}

/* 右侧按钮组小屏时靠右但可换行 */
.d-flex.justify-content-end {
  gap: 8px;
}

/* 使网格在小屏下也能适应宽度 */
@media (max-width: 1200px){
  .uid-grid { width: 100%; }
}

/* 背题模式开关：透明背景，仅边框与文字着色 */
.btn.reveal-off {
  background: transparent !important;
  color: #0d6efd;               /* 蓝色文字 */
  border: 1px solid #0d6efd;    /* 蓝色边框 */
  box-shadow: none;
}
.btn.reveal-on {
  background: transparent !important;
  color: #a36b00;               /* 黄色文字（深黄用于可读） */
  border: 1px solid #ffd43b;    /* 黄色边框 */
  box-shadow: none;
}

/* 小调整：悬停时保持透明但强化边框颜色以提示交互 */
.btn.reveal-off:hover { background: rgba(13,110,253,0.04); border-color: #0b5ed7; }
.btn.reveal-on:hover  { background: rgba(255,212,59,0.06); border-color: #ffcd39; }
/* uid-grid: 在移动端调整列数与方块尺寸（保持方块大小不被遮盖） */
@media (max-width: 992px) {
  :root { --grid-columns: 4; --square-size: 48px; --grid-gap: 6px; }
  .col-lg-8 { flex: 0 0 68%; max-width: 68%; }
  .col-lg-4 { flex: 0 0 32%; max-width: 32%; }
}

/* 更小屏幕（tablet/phone） */
@media (max-width: 768px) {
  :root { --grid-columns: 3; --square-size: 42px; --grid-gap: 6px; --grid-rows-visible: 8; }
  .col-lg-8, .col-lg-4 { flex: 0 0 100%; max-width: 100%; }
  .container { padding-left: 8px; padding-right: 8px; }
  .card { margin: 8px auto; max-width: 100%; }
  .card .card-body { padding: 10px; }
  .option-btn { padding:10px 12px; font-size:14px; }
  .uid-grid { grid-template-columns: repeat(3, 1fr); gap: var(--grid-gap); width: 100%; }

  /* 新增：右侧题目列表卡片在移动端页面中居中显示并限制最大宽度 */
  .col-lg-4 > .card {
    max-width: 420px; /* 卡片最大宽度，可按需调整 */
    margin-left: auto;
    margin-right: auto;
    width: 100%;
  }
  /* 同时确保左侧题目卡在单列时也居中（可选） */
  .col-lg-8 > .card {
    max-width: 720px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
  }
}

@media (max-width: 480px) {
  :root { --grid-columns: 5; --square-size: auto; --grid-gap: 4px; --grid-rows-visible: 6; }
  .uid-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: var(--grid-gap);
    width: 100%;
    padding: 4px;
  }
  .option-btn { padding:10px 10px; font-size:13px; }
}

/* 确保网格本身不会被滚动条遮挡（卡片承担滚动），并保持 box-sizing */
.uid-grid { box-sizing: border-box; overflow-x: hidden; }
/* 题目头部：改为相对定位，标题可多行，右侧留出星标位置 */
.q-header {
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 8px;
}

/* 标题：占据剩余空间但限定最大宽度，允许多行换行，不会被星标遮挡 */
#qtitle {
  flex: 1 1 auto;
  min-width: 0; /* 允许在 flex 中收缩并换行 */
  max-width: calc(100% - var(--star-space));
  box-sizing: border-box;
  margin: 0;
  text-align: left;
  white-space: normal;
  word-break: break-word;
  font-size: 1rem;
  line-height: 1.3;
  padding-right: 6px; /* 与星标留小间隙 */
}

/* 星标绝对定位到右上角，不占据标题宽度 */
.star-wrap {
  position: absolute;
  top: 6px;
  right: 8px;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 微调星标按钮尺寸 */
#starBtn {
  padding: 4px 8px;
  font-size: 0.95rem;
  line-height: 1;
}

/* 小屏时缩小预留空间 */
@media (max-width: 480px) {
  :root { --star-space: 48px; }
  #qtitle { font-size: 0.95rem; }
  #starBtn { padding: 6px 8px; font-size:0.9rem; }
}

/* 小屏时标题允许换行，防止过度截断 */
@media (max-width: 576px) {
  #qtitle { white-space: normal; font-size: 0.95rem; }
  #starBtn { padding: 6px 10px; }
}

/* 底部控制行：左侧提交按钮和反馈，右侧上一/下一题 */
.controls-row { width: 100%; }
.controls-row .left-controls { display:flex; align-items:center; gap:10px; }
.controls-row .right-controls { display:flex; align-items:center; gap:8px; }

/* 确保在小屏时控件换行 */
@media (max-width: 576px){
  .controls-row { flex-direction: column; align-items: stretch; gap:8px; }
  .controls-row .left-controls, .controls-row .right-controls { justify-content: space-between; }
  .controls-row .right-controls { margin-left: auto; }
  #submitBtn { width: auto; }
}

/* 标题/星标（确保标题多行左对齐，星标不占用标题空间） */
.q-header { display:flex; align-items:flex-start; gap:8px; }
#qtitle { flex:1 1 auto; min-width:0; white-space: normal; text-align:left; margin:0; padding-right:8px; }
.star-wrap { flex:0 0 auto; align-self:flex-start; }
/* 单元列表项：相对定位，足够高度容纳两行按钮，内容垂直居中 */
.unit-item {
  position: relative;
  padding-right: 110px;
  display: flex;
  align-items: center; /* 垂直居中 */
  min-height: 90px; /* 增大高度以容纳两行按钮 */
  padding-top: 0;
  padding-bottom: 0;
  overflow: visible;
}

/* 标题区域：允许多行、左对齐，垂直居中 */
.unit-item .unit-title {
  display: block;
  margin: 0;
  padding: 0;
  font-weight: 600;
  word-break: break-word;
  white-space: normal;
  min-height: 1.4em;
  align-self: center; /* 在 flex 容器中垂直居中 */
}

/* 右上动作区：绝对定位，上下两排按钮垂直排列 */
.unit-item .unit-actions {
  position: absolute;
  top: 50%; /* 相对于容器高度的中点 */
  transform: translateY(-50%); /* 向上偏移自身高度的一半，实现垂直居中 */
  right: 8px;
  width: 92px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 6px;
}

/* 小屏适配：减小预留与动作区宽度，保持上下排列 */
@media (max-width: 576px) {
  .unit-item { min-height: 60px; padding-right: 90px; }
  .unit-item .unit-actions { width: 60px; gap: 3px; }
  .unit-item .unit-actions .btn { font-size: 0.75rem; padding: 3px 3px; }
}
